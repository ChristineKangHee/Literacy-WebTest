<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>글랑 문해력 유형 테스트</title>
  <!-- 📌 공유 최적화 (Open Graph, Twitter, Kakao) -->
  <meta name="description" content="8문항으로 확인하는 나의 문해력 캐릭터! 1분 만에 OX & 객관식으로 진단하고 글랑 앱에서 심화 학습을 이어가세요." />
  <meta property="og:title" content="글랑 문해력 유형 테스트 – 나의 문해력 캐릭터 찾기" />
  <meta property="og:description" content="8문항 문해력 테스트로 나의 읽기 강점을 확인하고, 6가지 부바 캐릭터 중 나와 맞는 유형을 만나보세요!" />
  <meta property="og:image" content="https://glang.app/assets/og/literacy-test_1200x630.png" />
  <meta property="og:url" content="https://glang.app/literacy-test" />
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="ko_KR" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="글랑 문해력 유형 테스트 – 나의 문해력 캐릭터 찾기" />
  <meta name="twitter:description" content="1분 컷 문해력 테스트 · 어휘/독해/문법/논리 진단 & 6가지 캐릭터 결과" />
  <meta name="twitter:image" content="https://glang.app/assets/og/literacy-test_1200x630.png" />
  <!-- 카카오톡 썸네일 최적화 -->
  <meta property="og:site_name" content="글랑(GLANG)" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <style>
    :root{--bg:#faf9ff;--card:#ffffff;--ink:#1f2340;--sub:#6a6f8b;--brand:#6c63ff;--ok:#00b894;--warn:#ffb703;--bad:#ef476f}
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,Pretendard,sans-serif}
    .wrap{max-width:860px;margin:0 auto;padding:20px}
    header{display:flex;align-items:center;gap:10px;margin:10px 0 18px}
    header .logo{width:36px;height:36px;border-radius:10px;background:var(--brand);display:grid;place-items:center;color:#fff;font-weight:800}
    h1{font-size:22px;margin:0}
    .card{background:var(--card);border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.06);padding:20px}
    .intro h2{margin-top:0}
    .meta{color:var(--sub);font-size:14px}
    .btn{appearance:none;border:0;border-radius:12px;padding:14px 16px;background:var(--brand);color:#fff;font-weight:700;cursor:pointer}
    .btn.secondary{background:#e9e8ff;color:#3f3aeb}
    .btn.ghost{background:transparent;border:2px solid var(--brand);color:var(--brand)}
    .btn:disabled{opacity:.5;cursor:not-allowed}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .space{height:12px}
    .progress{height:10px;background:#ececff;border-radius:999px;overflow:hidden}
    .bar{height:100%;width:0;background:linear-gradient(90deg,#6c63ff,#9a93ff)}
    .q-title{font-size:18px;font-weight:700}
    .choices{display:grid;gap:10px;margin-top:14px}
    .choice{display:flex;align-items:flex-start;gap:10px;border:2px solid #ececff;border-radius:12px;padding:12px;cursor:pointer;transition:all .15s}
    .choice:hover{border-color:#d7d6ff;background:#fbfbff}
    .choice input{margin-top:4px}
    .pill{display:inline-block;border-radius:999px;padding:4px 10px;background:#eef0ff;color:#3f3aeb;font-size:12px;font-weight:700;margin-left:6px}
    .result{display:grid;gap:14px}
    .result .hero{display:flex;gap:16px;align-items:center}
    .char{width:88px;height:88px;border-radius:18px;background:#fff;display:grid;place-items:center;border:2px dashed #e6e6ff}
    .kpi{display:grid;gap:8px}
    .kpi-row{display:grid;grid-template-columns:120px 1fr;gap:10px;align-items:center}
    .kpi .progress{height:8px}
    footer{margin:28px 0 10px;color:var(--sub);font-size:12px;text-align:center}
    .note{font-size:12px;color:var(--sub)}
    .char{width:88px;height:88px;border-radius:18px;background:#fff;display:grid;place-items:center;border:2px dashed #e6e6ff;overflow:hidden}
    .char img{width:100%;height:100%;object-fit:cover;border-radius:16px}
/* Intro 캐릭터 로테이터 */
.rotator{
  width: 160px;           /* 필요시 120~200px로 조절 */
  height: 160px;
  margin-top: 10px;
  border-radius: 18px;
  overflow:hidden;
  border:2px dashed #e6e6ff;
  background:#fff;
  display:grid;
  place-items:center;
}
.rotator img{
  width:100%;
  height:100%;
  object-fit:cover;
  animation: fadeIn .35s ease;
  border-radius:16px;
}
@keyframes fadeIn{
  from{opacity:0; transform:scale(.98)}
  to{opacity:1; transform:scale(1)}
}

  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">G</div>
      <div>
        <h1>문해력 유형 테스트</h1>
        <div class="meta">8문항 · OX & 4지선다 · 1분컷</div>
      </div>
    </header>

    <main class="card" id="app">
      <!-- Content renders here -->
    </main>
    <footer>© GLANG · Literacy mini test for promo</footer>
  </div>

<script>
// ====== 데이터 정의 ======
const QUESTIONS = [
    // QUESTIONS[0] 교체
  {
    id: 1,
    area: '어휘',
    type: 'OX',
    text: "‘사흘 뒤’는 오늘이 1일이라면 5일이다.", // 의도적으로 틀린 진술
    options: ['O','X'],
    answer: 1, // X
    weights: { VOCAB: 1, FOCUS: 0.2 }
  },
  {
    id: 2,
    area: '어휘',
    type: '4지선다',
    text: "‘금일’의 의미로 알맞은 것은?",
    options: ['오늘','내일','이번 주','요즘'],
    answer: 0,
    weights: { VOCAB: 1 }
  },
  {
    id: 3,
    area: '독해',
    type: '4지선다',
    text: "아래 글을 읽고 핵심을 고르세요.\n‘어떤 사람은 짧은 글은 잘 이해하지만 긴 글에서는 핵심을 놓친다. 이런 경우 꾸준히 요약 훈련을 하는 것이 도움이 된다.’",
    options: ['긴 글은 읽지 말자','요약 훈련이 필요하다','모든 글을 똑같이 읽어야 한다','짧은 글은 쉬운 글이다'],
    answer: 1,
    weights: { COMPREH: 1, LOGIC: 0.3 }
  },
  {
    id: 4,
    area: '독해',
    type: 'OX',
    text: "‘배가 고파서 밥을 먹었다’에서 원인은 ‘배가 고파서’이고 결과는 ‘밥을 먹었다’이다.",
    options: ['O','X'],
    answer: 0,
    weights: { COMPREH: 1 }
  },
  {
    id: 5,
    area: '문법',
    type: '4지선다',
    text: "다음 중 맞는 표기는?",
    options: ['할 수 있다','할수있다','할수 있다','할 수있다'],
    answer: 0,
    weights: { GRAMMAR: 1, EXPRESSION: 0.3 }
  },
  {
    id: 6,
    area: '문법',
    type: 'OX',
    text: "‘먹을게’가 맞는 표현이다.",
    options: ['O','X'],
    answer: 0, // O
    weights: { GRAMMAR: 1 }
  },
  {
    id: 7,
    area: '논리',
    type: '4지선다',
    text: "‘모든 새는 날 수 있다. 펭귄은 새다. 따라서 펭귄은 날 수 있다.’의 문제점은?",
    options: ['사실과 의견이 섞였다','전제가 잘못됐다','논리적으로 완벽하다','결론이 적절하다'],
    answer: 1,
    weights: { LOGIC: 1 }
  },
  {
    id: 8,
    area: '종합',
    type: '4지선다',
    text: "다음 중 문해력의 정의로 가장 적절한 것은?",
    options: ['글을 읽고 쓸 수 있는 능력','읽고 이해·비판·표현하는 종합 능력','글자를 많이 아는 능력','긴 글을 끝까지 읽는 끈기'],
    answer: 1,
    weights: { LOGIC: 0.7, COMPREH: 0.3 }
  }
];

// 결과 유형 정의 (6유형) — desc를 [글 형식] 톤으로 개편
const TYPES = {
  VOCAB: { 
    name: '어휘 마스터', 
    color: '#ffcf33', 
    desc: '낯선 단어를 보면 호기심이 먼저 올라오는 당신!<br>뜻과 뉘앙스를 쓱 캐치하고, 비슷한 표현도 깔끔히 구분해요.<br>친구들이 헷갈리는 말뜻 물어볼 때 해결사로 활약하죠!<br>가끔 디테일에 몰입해 큰 흐름을 놓칠 수 있지만, 한 번 정리하면 오래 가요.<br>단어장·하이라이트·짤막 메모가 딱 맞는 루틴이에요.<br>오늘의 신조어도 금방 내 것으로 만드는 어휘 고수!', 
    img: 'assets/character1.jpg'
  },
  COMPREH: { 
    name: '독해 탐색자', 
    color: '#6dd3ff', 
    desc: '글의 구조와 요지를 번쩍 포착하는 당신!<br>“그래서 핵심은?” 한 줄 요약에 강해요.<br>문단 간 연결과 원인–결과를 깔끔히 잡아내죠.<br>때로는 세부보다 큰 그림을 먼저 보는 편이라, 근거만 살짝 보강하면 금상첨화!<br>마인드맵·키워드 카드·문단표시가 찰떡 보조 장비예요.<br>긴 글도 방향 잃지 않는 든든한 항해사!', 
    img: 'assets/character2.jpg'
  },
  GRAMMAR: { 
    name: '문법 가디언', 
    color: '#b8e986', 
    desc: '맞춤법 레이더가 자동 작동되는 정확성 플레이어!<br>어색한 띄어쓰기나 문장 보면 바로 다듬고 싶어져요.<br>규범을 지켜 문서 퀄리티를 한 단계 끌어올리는 타입이죠.<br>가끔 창의적 표현 앞에서 멈칫할 수 있지만, 기준 위에 변주를 얹으면 최고!<br>교정·체크리스트·예문 수집이 성향과 찰떡궁합.<br>팀의 글을 든든히 지키는 문법 수호자!', 
    img: 'assets/character3.jpg'
  },
  LOGIC: { 
    name: '논리 크리티커', 
    color: '#a78bfa', 
    desc: '주장엔 근거, 예외엔 반례! 허점을 날카롭게 포착하는 비판적 독자예요.<br>주장–근거–결론 구조로 설득의 흐름을 견고하게 만듭니다.<br>데이터 검증을 즐기고, 감정적 수사는 최소화하는 쿨한 타입!<br>가끔 냉정해 보일 수 있으니 따뜻한 예시를 곁들이면 완벽해요.<br>토론·팩트체크·근거표 만들기에 진가를 발휘해요.<br>읽기를 생각으로, 생각을 논리로 바꾸는 설계자!', 
    img: 'assets/character4.jpg'
  },
  EXPRESSION: { 
    name: '표현 크리에이터', 
    color: '#ff9ecd', 
    desc: '아이디어를 매력적으로 포장하는 스토리텔러!<br>어휘 선택과 문장 리듬이 살아 있어 읽는 재미를 끌어올려요.<br>비유와 사례로 공감을 이끌고, 구성으로 흐름을 잡는 능력자죠.<br>때로는 디테일 근거가 아쉬울 수 있어요—팩트 체크만 더하면 금상첨화!<br>에세이·발표·카피라이팅 미션에서 빛나요.<br>당신의 문장은 골라 읽는 글을 ‘읽고 싶어지는 글’로 바꿉니다!', 
    img: 'assets/character5.jpg'
  },
  FOCUS: { 
    name: '집중 파이터', 
    color: '#ffad5a', 
    desc: '한 번 몰입하면 끝까지! 긴 글도 페이스를 유지하며 완독하는 끈기왕!<br>방해 요소를 차단하고 루틴을 만드는 데 탁월해요.<br>타이머·체크리스트·작은 목표로 꾸준히 전진하죠.<br>가끔 속도에 집중해 핵심 표시를 놓칠 수 있으니 요약·키워드 표시를 곁들이면 효율 UP!<br>챌린지·연속 코스 미션에서 진가 폭발!<br>오늘도 한 페이지, 내일은 한 챕터—꾸준함이 실력을 만듭니다.', 
    img: 'assets/character6.jpg'
  }
};


// ====== 상태 ======
let state = { step: 'intro', index: 0, answers: Array(QUESTIONS.length).fill(null) };

const $app = document.getElementById('app');

function render(){
  if(state.step==='intro') return renderIntro();
  if(state.step==='quiz') return renderQuiz();
  if(state.step==='result') return renderResult();
}

function renderIntro(){
  $app.innerHTML = `
    <section class="intro">
      <h2>나의 문해력 유형은?</h2>
      <div class="rotator"><img id="rotImg" alt="캐릭터 미리보기" /></div>
      <p class="meta">OX와 4지선다로 어휘·독해·문법·논리를 가볍게 점검합니다.</p>
      <div class="space"></div>
      <button class="btn" onclick="startQuiz()">시작하기</button>
      <div class="space"></div>
      <p class="note">결과는 6가지 캐릭터(어휘/독해/문법/논리/표현/집중) 중 하나로 제공됩니다.</p>
    </section>
  `;
  startRotator(); // ★ 추가: 로테이터 시작
}
// ====== Intro 캐릭터 로테이터 ======
let introTimer = null;
const INTRO_IMAGES = [
  'assets/character1.jpeg',
  'assets/character2.jpeg',
  'assets/character3.jpeg',
  'assets/character4.jpeg',
  'assets/character5.jpeg',
  'assets/character6.jpeg'
];

// 이미지 프리로드 + jpg 폴백 지원
function preloadIntroImages() {
  INTRO_IMAGES.forEach((src, i) => {
    const img = new Image();
    img.onerror = () => {
      // jpeg가 없으면 jpg 시도
      const jpg = src.replace('.jpeg', '.jpg');
      INTRO_IMAGES[i] = jpg;
      const fix = new Image();
      fix.src = jpg;
    };
    img.src = src;
  });
}

function startRotator(){
  preloadIntroImages();
  const el = document.getElementById('rotImg');
  if(!el) return;

  let idx = 0;
  const setImage = () => {
    el.src = INTRO_IMAGES[idx];
    el.onerror = function(){
      // 남아있는 확장자 이슈 대비: jpeg↔jpg 양방향 폴백
      const nextTry = el.src.endsWith('.jpeg') ? el.src.replace('.jpeg','.jpg') : el.src.replace('.jpg','.jpeg');
      if(nextTry !== el.src){ el.src = nextTry; }
    };
    idx = (idx + 1) % INTRO_IMAGES.length;
  };
  setImage();
  clearInterval(introTimer);
  introTimer = setInterval(setImage, 900); // 전환 간격(ms) 조절 가능
}

// 퀴즈로 넘어갈 때 타이머 정리
function startQuiz(){
  if(introTimer){ clearInterval(introTimer); introTimer = null; }
  state.step='quiz';
  state.index=0; state.answers=Array(QUESTIONS.length).fill(null);
  render();
}


function startQuiz(){
  state.step='quiz';
  state.index=0; state.answers=Array(QUESTIONS.length).fill(null);
  render();
}

function renderQuiz(){
  const q = QUESTIONS[state.index];
  const total = QUESTIONS.length;
  const progress = ((state.index)/total)*100;
  const selected = state.answers[state.index];
  $app.innerHTML = `
    <div class="meta">문항 ${state.index+1} / ${total} · ${q.area} · ${q.type}</div>
    <div class="progress" aria-label="진행률"><div class="bar" style="width:${progress}%"></div></div>
    <div class="space"></div>
    <div class="q-title">${escapeHTML(q.text).replace(/\n/g,'<br>')}</div>
    <div class="choices" role="group" aria-label="선택지">
      ${q.options.map((opt,i)=>`
        <label class="choice">
          <input type="radio" name="q${q.id}" ${selected===i?'checked':''} onchange="choose(${i})" />
          <div><div>${escapeHTML(opt)}</div></div>
        </label>
      `).join('')}
    </div>
    <div class="space"></div>
    <div class="row">
      <button class="btn secondary" ${state.index===0?'disabled':''} onclick="prev()">이전</button>
      <button class="btn" ${selected==null?'disabled':''} onclick="next()">${state.index===total-1?'결과보기':'다음'}</button>
    </div>
  `;
}

function choose(i){
  state.answers[state.index]=i; render();
}
function prev(){ state.index=Math.max(0,state.index-1); render(); }
function next(){
  if(state.index===QUESTIONS.length-1){
    state.step='result';
    render();
  } else { state.index++; render(); }
}

function scoreDetail(){
  // 영역별 가중치 합산 (정답만 반영)
  const buckets = { VOCAB:0, COMPREH:0, GRAMMAR:0, LOGIC:0, EXPRESSION:0, FOCUS:0 };
  const correctFlags = [];
  QUESTIONS.forEach((q,idx)=>{
    const ok = state.answers[idx]===q.answer;
    correctFlags[idx]=ok;
    if(ok){
      for(const k in q.weights){ buckets[k]+=q.weights[k]; }
    }
  });
  const totalScore = correctFlags.filter(Boolean).length;
  return { buckets, totalScore, correctFlags };
}

function pickType(detail){
  // 최댓값 유형 선택, 동점 시 우선순위: COMPREH > VOCAB > GRAMMAR > LOGIC > EXPRESSION > FOCUS
  const order = ['COMPREH','VOCAB','GRAMMAR','LOGIC','EXPRESSION','FOCUS'];
  let winner = 'FOCUS', best = -1;
  for(const k of order){
    const v = detail.buckets[k];
    if(v>best){ best=v; winner=k; }
  }
  // 매우 높은 총점이면 논리 부바 보정
  if(detail.totalScore>=7){ winner='LOGIC'; }
  return winner;
}

function renderResult(){
  const detail = scoreDetail();
  const winnerKey = pickType(detail);
  const t = TYPES[winnerKey];

  // 영역별 진행바 데이터
  const pretty = [
    ['어휘', detail.buckets.VOCAB],
    ['독해', detail.buckets.COMPREH],
    ['문법', detail.buckets.GRAMMAR],
    ['논리', detail.buckets.LOGIC],
    ['표현', detail.buckets.EXPRESSION],
    ['집중', detail.buckets.FOCUS],
  ];
  const maxBar = Math.max(...pretty.map(p=>p[1]), 1);

  $app.innerHTML = `
    <section class="result">
      <div class="hero">
        <div class="char" style="border-color:${t.color}">
          <img src="${t.img}" alt="${t.name}" onerror="this.replaceWith(document.createTextNode('🧩'));">
        </div>
        <div>
          <div class="pill" style="background:${t.color}22;color:${t.color}">당신의 캐릭터</div>
          <h2 style="margin:.2rem 0 0">${t.name}</h2>
          <p class="meta" style="margin:.35rem 0 0">총점 ${detail.totalScore} / ${QUESTIONS.length}</p>
        </div>
      </div>

      <p style="margin:8px 0 0">${t.desc}</p>

      <div class="space"></div>
      <h3 style="margin:0">영역별 프로파일</h3>
      <div class="kpi">
        ${pretty.map(([label,val])=>{
          const pct = Math.round((val/maxBar)*100);
          return `<div class=\"kpi-row\"><div class=\"meta\">${label}</div><div class=\"progress\"><div class=\"bar\" style=\"width:${pct}%;background:${t.color}\"></div></div></div>`
        }).join('')}
      </div>

      <div class="space"></div>
      <div class="row">
        <button class="btn" onclick="shareResult('${t.name}', ${detail.totalScore})">결과 공유하기</button>
        <button class="btn ghost" onclick="startQuiz()">다시 풀기</button>
      </div>

      <div class="space"></div>
      <a class="btn secondary" href="#" onclick="goToStore();return false;">
        👉 글랑 앱에서 심화 테스트
      </a>


      <div class="space"></div>
      <details>
        <summary>정답 해설 보기</summary>
        <ol>
          ${QUESTIONS.map((q,i)=>`<li><strong>Q${i+1}</strong> 정답: ${q.options[q.answer]}</li>`).join('')}
        </ol>
      </details>
    </section>
  `;
}

function shareResult(name, score){
  const text = `나는 ${name}! (총점 ${score}/${QUESTIONS.length}) — 글랑 문해력 미니 테스트`;
  const url = location.href;
  if(navigator.share){ navigator.share({title: '글랑 문해력 테스트', text, url}).catch(()=>{}); }
  else { navigator.clipboard.writeText(`${text} ${url}`).then(()=>alert('결과 링크를 클립보드에 복사했어요!')); }
}
function goToStore(){
  const ua = navigator.userAgent || navigator.vendor || window.opera;
  
  if (/android/i.test(ua)) {
    // 안드로이드 → 플레이스토어
    window.location.href = "https://play.google.com/store/apps/details?id=com.zero.glang&pcampaignid=web_share";
  } else if (/iPad|iPhone|iPod/.test(ua) && !window.MSStream) {
    // iOS → 앱스토어
    window.location.href = "https://apps.apple.com/kr/app/%EA%B8%80%EB%9E%91-glang/id6740841063";
  } else {
    // PC 및 기타 환경 → Google Play 웹 링크
    window.location.href = "https://play.google.com/store/apps/details?id=com.zero.glang&pcampaignid=web_share";
  }
}

function escapeHTML(s){ return s.replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[c])); }

render();
</script>
</body>
</html>
