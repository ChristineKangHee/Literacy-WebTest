<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>ê¸€ë‘ ë¬¸í•´ë ¥ ë¯¸ë‹ˆ í…ŒìŠ¤íŠ¸</title>
<!-- âœ… ì¹´í†¡/ë©”ì‹ ì € ë¯¸ë¦¬ë³´ê¸°ìš© OG/Twitter ë©”íƒ€ -->
<meta name="description" content="8ë¬¸í•­ 1ë¶„ì»·! ì–´íœ˜Â·ë…í•´Â·ë¬¸ë²•Â·ë…¼ë¦¬ë¡œ ë‚˜ì˜ ë¬¸í•´ë ¥ ìºë¦­í„°ë¥¼ ë½‘ì•„ë³´ì„¸ìš”." />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="ê¸€ë‘(GLANG)" />
<meta property="og:locale" content="ko_KR" />
<meta property="og:title" content="ê¸€ë‘ ë¬¸í•´ë ¥ ë¯¸ë‹ˆ í…ŒìŠ¤íŠ¸ â€“ ë‚˜ì˜ ë¬¸í•´ë ¥ ìºë¦­í„° ì°¾ê¸°" />
<meta property="og:description" content="8ë¬¸í•­ ë¬¸í•´ë ¥ í…ŒìŠ¤íŠ¸ë¡œ ë‚˜ì˜ ì½ê¸° ê°•ì ì„ í™•ì¸í•˜ê³ , 6ê°€ì§€ ìºë¦­í„° ê²°ê³¼ë¥¼ ë§Œë‚˜ë³´ì„¸ìš”!" />
<meta property="og:url" content="https://zeroglang.com/" />
<meta property="og:image" content="https://zeroglang.com/og/1200x630.jpg" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />

<!-- íŠ¸ìœ„í„° ì¹´ë“œ(ì˜µì…˜) -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="ê¸€ë‘ ë¬¸í•´ë ¥ ë¯¸ë‹ˆ í…ŒìŠ¤íŠ¸ â€“ ë‚˜ì˜ ë¬¸í•´ë ¥ ìºë¦­í„° ì°¾ê¸°" />
<meta name="twitter:description" content="1ë¶„ ì»· ë¬¸í•´ë ¥ í…ŒìŠ¤íŠ¸ Â· ì–´íœ˜/ë…í•´/ë¬¸ë²•/ë…¼ë¦¬ ì§„ë‹¨ & 6ê°€ì§€ ìºë¦­í„° ê²°ê³¼" />
<meta name="twitter:image" content="https://zeroglang.com/og/1200x630.jpg" />

<link rel="canonical" href="https://zeroglang.com/" />

<style>
  :root{ --tap:44px; }
  html,body{height:100%;margin:0;background:#E5E8F1;}
  body{display:flex;align-items:center;justify-content:center;}

  /* í™”ë©´ ì»¨í…Œì´ë„ˆ */
  .stage{
    position:relative;
    width:min(100vw, 768px);
    height:100svh;
    max-height:1600px;
    overflow:hidden;
    background:#E5E8F1;
  }
  .bg{
    position:absolute; inset:0;
    background:#E5E8F1 center/contain no-repeat;
  }

  /* í•«ìŠ¤íŒŸ: íˆ¬ëª… ë²„íŠ¼(í´ë¦­ ê°€ëŠ¥, % ìœ ì§€) */
  .hotspot{
    position:absolute; display:block; border:none; background:transparent;
    padding:0; margin:0; cursor:pointer;
    min-width:var(--tap); min-height:var(--tap);
    touch-action:manipulation;
  }
  .hotspot:focus-visible{
    outline:2px dashed rgba(40,120,255,.8);
    outline-offset:2px; border-radius:12px;
  }

  /* ë¹„í´ë¦­ ê³ ì • ì˜ì—­(í…ìŠ¤íŠ¸ í‘œê¸°ìš©) */
  .spot{
    position:absolute; display:flex; align-items:center; justify-content:center;
    background:transparent; pointer-events:none; text-align:center;
  }

  /* ë””ë²„ê·¸ ëª¨ë“œ */
  .debug .hotspot,
  .debug .spot{ outline:1px dashed rgba(0,0,0,.25); background:rgba(0,128,255,.06); }
  .debug .hotspot::after{
    content:attr(aria-label);
    position:absolute; left:0; top:-1.6em;
    font:600 12px/1.2 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto;
    color:#0b61ff; background:#fff; border:1px solid #cfe3ff; border-radius:6px; padding:.15em .4em;
    white-space:nowrap; pointer-events:none;
  }

  /* í•˜ë‹¨ í† ìŠ¤íŠ¸ */
  .toast{
    position:absolute; left:50%; transform:translate(-50%, 8px);
    bottom:18px; padding:.7em 1em; border-radius:10px;
    font:600 14px/1.2 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto;
    background:#fff; color:#1b2b4a;
    box-shadow:0 8px 32px rgba(0,0,0,.08);
    opacity:0; pointer-events:none;
    transition:opacity .18s ease, transform .18s ease;
  }
  .toast.show{ opacity:1; transform:translate(-50%, 0); }
  .toast.ok  { background:#E9FFF3; color:#0A6F3C; box-shadow:0 8px 32px rgba(2,128,70,.12); }
  .toast.bad { background:#FFEEEE; color:#A3002A; box-shadow:0 8px 32px rgba(163,0,42,.14); }

  /* ê²°ê³¼ ì ìˆ˜ í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
  .score{
    font:700 13px/1 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto;
    color:#ffffff; letter-spacing:.2px;
    text-shadow:0 1px 2px rgba(0,0,0,.2);
    white-space:nowrap;
  }
</style>
</head>
<body>
  <main id="app" class="stage" aria-live="polite">
    <div id="bg" class="bg"></div>
    <!-- JSê°€ hotspot/spot ìš”ì†Œë¥¼ ì£¼ì… -->
    <div id="toast" class="toast" role="status" aria-live="polite"></div>
  </main>

<script>
/* --------------------------
   0) ìœ í‹¸ & ì´ˆê¸° ì„¤ì •
---------------------------*/
const $ = sel => document.querySelector(sel);
const params = new URLSearchParams(location.search);
const DEBUG = params.get('debug') === '1';
if (DEBUG) document.body.classList.add('debug');
window.addEventListener('keydown', e=>{
  if (e.key.toLowerCase() === 'd') document.body.classList.toggle('debug');
});

// í”Œë«í¼ë³„ ìŠ¤í† ì–´ ë§í¬
const STORE = {
  android: 'https://play.google.com/store/apps/details?id=com.zero.glang&pcampaignid=web_share',
  ios: 'https://apps.apple.com/kr/app/%EA%B8%80%EB%9E%91-glang/id6740841063'
};
function isIOS(){
  const ua=navigator.userAgent||'';
  const iOSClassic=/iPhone|iPad|iPod/i.test(ua);
  const iPadLikeMac=/Macintosh/i.test(ua) && 'ontouchend' in document;
  return iOSClassic || iPadLikeMac;
}
function openStore(){ window.open(isIOS()?STORE.ios:STORE.android,'_blank','noopener'); }

/* --------------------------
   1) ë°ì´í„° (ì´ë¯¸ì§€ + í•«ìŠ¤íŒŸ)
---------------------------*/
const box = (x,y,w,h)=>({x,y,w,h});

/* ì •ë‹µ í‚¤ (ìƒ˜í”Œ) */
const correct = {
  q1: 'o',
  q2: 'ì˜¤ëŠ˜',
  q3: 'ìš”ì•½ í›ˆë ¨ì´ í•„ìš”í•˜ë‹¤',
  q4: 'o',
  q5: 'í•  ìˆ˜ ìˆë‹¤',
  q6: 'o',
  q7: 'ì „ì œê°€ ì˜ëª»ëë‹¤',
  q8: 'ì½ê³  ì´í•´Â·ë¹„íŒÂ·í‘œí˜„í•˜ëŠ” ì¢…í•© ëŠ¥ë ¥'
};

/* ê²°ê³¼ ì ìˆ˜ ì˜ì—­(í¼ì„¼íŠ¸) â†’ ì‹¤ì œ ë°°ì¹˜ ì‹œ í”½ì…€ ë³€í™˜ */
const RESULT_SCORE_POS_PCT = {
  expression: { x:68.5, y:49.5, w:22, h:4.8 },
  comp:       { x:68.5, y:49.5, w:22, h:4.8 },
  focus:      { x:68.5, y:49.5, w:22, h:4.8 },
  grammar:    { x:68.5, y:49.5, w:22, h:4.8 },
  logic:      { x:68.5, y:49.5, w:22, h:4.8 },
  vocab:      { x:68.5, y:49.5, w:22, h:4.8 },
};

/* ê²°ê³¼ ìºë¦­í„° ë¼ë²¨ */
function resultLabelByKey(key){
  return ({
    expression:'í‘œí˜„ í¬ë¦¬ì—ì´í„°',
    comp:'ë…í•´ íƒìƒ‰ì',
    focus:'ì§‘ì¤‘ íŒŒì´í„°',
    grammar:'ë¬¸ë²• ê°€ë””ì–¸',
    logic:'ë…¼ë¦¬ í¬ë¦¬í‹°ì»¤',
    vocab:'ì–´íœ˜ ë§ˆìŠ¤í„°'
  })[key] || 'ë¬¸í•´ë ¥ ìºë¦­í„°';
}

const screens = [
  { id:'intro', img:'assets/intro.jpg',
    hotspots:[ {id:'start',label:'START',rect:box(22,73,56,7),on:'next'} ] },

  { id:'q1', img:'assets/q1.jpg',
    hotspots:[
      {id:'q1_o',label:'O',rect:box(5,47,90,8),on:'answer:o'},
      {id:'q1_x',label:'X',rect:box(5,57,90,8),on:'answer:x'},
    ]},

  { id:'q2', img:'assets/q2.jpg',
    hotspots:[
      {id:'q2_a',label:'ì˜¤ëŠ˜',rect:box(5,37,90,8),on:'answer:ì˜¤ëŠ˜'},
      {id:'q2_b',label:'ë‚´ì¼',rect:box(5,47,90,8),on:'answer:ë‚´ì¼'},
      {id:'q2_c',label:'ì´ë²ˆ ì£¼',rect:box(5,58,90,8),on:'answer:ì´ë²ˆ ì£¼'},
      {id:'q2_d',label:'ìš”ì¦˜',rect:box(5,68,90,8),on:'answer:ìš”ì¦˜'},
    ]},

  { id:'q3', img:'assets/q3.jpg',
    hotspots:[
      {id:'q3_a',label:'ê¸´ ê¸€ì€ ì½ì§€ ë§ì',rect:box(5,41,90,8),on:'answer:ê¸´ ê¸€ì€ ì½ì§€ ë§ì'},
      {id:'q3_b',label:'ìš”ì•½ í›ˆë ¨ì´ í•„ìš”í•˜ë‹¤',rect:box(5,51,90,8),on:'answer:ìš”ì•½ í›ˆë ¨ì´ í•„ìš”í•˜ë‹¤'},
      {id:'q3_c',label:'ëª¨ë“  ê¸€ì„ ë˜‘ê°™ì´ ì½ì–´ì•¼ í•œë‹¤',rect:box(5,62,90,8),on:'answer:ëª¨ë“  ê¸€ì„ ë˜‘ê°™ì´ ì½ì–´ì•¼ í•œë‹¤'},
      {id:'q3_d',label:'ì§§ì€ ê¸€ì€ ì‰¬ìš´ ê¸€ì´ë‹¤',rect:box(5,72,90,8),on:'answer:ì§§ì€ ê¸€ì€ ì‰¬ìš´ ê¸€ì´ë‹¤'},
    ]},

  { id:'q4', img:'assets/q4.jpg',
    hotspots:[
      {id:'q4_o',label:'O',rect:box(5,48,90,8),on:'answer:o'},
      {id:'q4_x',label:'X',rect:box(5,59,90,8),on:'answer:x'},
    ]},

  { id:'q5', img:'assets/q5.jpg',
    hotspots:[
      {id:'q5_a',label:'í•  ìˆ˜ ìˆë‹¤',rect:box(5,38,90,8),on:'answer:í•  ìˆ˜ ìˆë‹¤'},
      {id:'q5_b',label:'í• ìˆ˜ìˆë‹¤',rect:box(5,48,90,8),on:'answer:í• ìˆ˜ìˆë‹¤'},
      {id:'q5_c',label:'í• ìˆ˜ ìˆë‹¤',rect:box(5,59,90,8),on:'answer:í• ìˆ˜ ìˆë‹¤'},
      {id:'q5_d',label:'í•  ìˆ˜ìˆë‹¤',rect:box(5,69,90,8),on:'answer:í•  ìˆ˜ìˆë‹¤'},
    ]},

  { id:'q6', img:'assets/q6.jpg',
    hotspots:[
      {id:'q6_o',label:'O',rect:box(5,48,90,8),on:'answer:o'},
      {id:'q6_x',label:'X',rect:box(5,59,90,8),on:'answer:x'},
    ]},

  { id:'q7', img:'assets/q7.jpg',
    hotspots:[
      {id:'q7_a',label:'ì‚¬ì‹¤ê³¼ ì˜ê²¬ì´ ì„ì˜€ë‹¤',rect:box(5,38,90,8),on:'answer:ì‚¬ì‹¤ê³¼ ì˜ê²¬ì´ ì„ì˜€ë‹¤'},
      {id:'q7_b',label:'ì „ì œê°€ ì˜ëª»ëë‹¤',rect:box(5,48,90,8),on:'answer:ì „ì œê°€ ì˜ëª»ëë‹¤'},
      {id:'q7_c',label:'ë…¼ë¦¬ì ìœ¼ë¡œ ì™„ë²½í•˜ë‹¤',rect:box(5,59,90,8),on:'answer:ë…¼ë¦¬ì ìœ¼ë¡œ ì™„ë²½í•˜ë‹¤'},
      {id:'q7_d',label:'ê²°ë¡ ì´ ì ì ˆí•˜ë‹¤',rect:box(5,69,90,8),on:'answer:ê²°ë¡ ì´ ì ì ˆí•˜ë‹¤'},
    ]},

  { id:'q8', img:'assets/q8.jpg',
    hotspots:[
      {id:'q8_a',label:'ê¸€ì„ ì½ê³  ì“¸ ìˆ˜ ìˆëŠ” ëŠ¥ë ¥',rect:box(5,38,90,8),on:'answer:ê¸€ì„ ì½ê³  ì“¸ ìˆ˜ ìˆëŠ” ëŠ¥ë ¥'},
      {id:'q8_b',label:'ì½ê³  ì´í•´Â·ë¹„íŒÂ·í‘œí˜„í•˜ëŠ” ì¢…í•© ëŠ¥ë ¥',rect:box(5,48,90,8),on:'answer:ì½ê³  ì´í•´Â·ë¹„íŒÂ·í‘œí˜„í•˜ëŠ” ì¢…í•© ëŠ¥ë ¥'},
      {id:'q8_c',label:'ê¸€ìë¥¼ ë§ì´ ì•„ëŠ” ëŠ¥ë ¥',rect:box(5,59,90,8),on:'answer:ê¸€ìë¥¼ ë§ì´ ì•„ëŠ” ëŠ¥ë ¥'},
      {id:'q8_d',label:'ê¸´ ê¸€ì„ ëê¹Œì§€ ì½ëŠ” ëˆê¸°',rect:box(5,69,90,8),on:'answer:ê¸´ ê¸€ì„ ëê¹Œì§€ ì½ëŠ” ëˆê¸°'},
    ]},

  { id:'result', img:'assets/result_expression.jpg',
    hotspots:[
      { id:'share',     label:'SHARE',     rect:box(17,80,30,6), on:'share' },
      { id:'restart',   label:'RESTART',   rect:box(53,80,30,6), on:'restart' },
      { id:'instagram', label:'Instagram', rect:box(40,89,8,5),  on:'instagram' },
      { id:'glang',     label:'Glang Logo',rect:box(50,89,8,5),  on:'glang' },
    ]}
];

/* --------------------------
   2) ìƒíƒœ & ì§„í–‰
---------------------------*/
const state = {
  index: 0,
  answers: {},
  score: null // { total, outOf, key }
};

const $bg = $('#bg');
const $stage = $('#app');
const $toast = $('#toast');
let LOCK = false;

/* í† ìŠ¤íŠ¸ */
function showToast(msg, type='ok', duration=900, onHide){
  $toast.className = 'toast';
  if (type) $toast.classList.add(type);
  $toast.textContent = msg;
  $toast.classList.add('show');
  setTimeout(()=>{
    $toast.classList.remove('show','ok','bad');
    if (typeof onHide === 'function') onHide();
  }, duration);
}

/* ì ìˆ˜ ê³„ì‚° */
function calcScore(answers){
  const isRight = q => answers[q] === correct[q];
  const count = {
    vocab:   (isRight('q1')?1:0) + (isRight('q2')?1:0),
    comp:    (isRight('q3')?1:0) + (isRight('q4')?1:0),
    grammar: (isRight('q5')?1:0) + (isRight('q6')?1:0),
    logic:   (isRight('q7')?1:0),
  };
  const totalCorrect = count.vocab + count.comp + count.grammar + count.logic + (isRight('q8')?1:0);
  return { totalCorrect, count };
}

/* --------------------------
   2-1) ì´ë¯¸ì§€ ë©”íƒ€ & ì ˆëŒ€ ë°°ì¹˜ ìœ í‹¸
---------------------------*/
const _imgMetaCache = new Map();
function getImageMeta(src){
  return new Promise((resolve)=>{
    if (_imgMetaCache.has(src)) return resolve(_imgMetaCache.get(src));
    const im = new Image();
    im.onload = ()=>{ const meta={w:im.naturalWidth,h:im.naturalHeight}; _imgMetaCache.set(src,meta); resolve(meta); };
    im.src = src;
  });
}

/* contain ë°°ê²½ ìœ„ì— í”½ì…€ ê³ ì • ë°°ì¹˜ */
async function placeOnContainedBg({stageEl,bgEl,imgUrl,rectPct,targetEl}){
  const meta = await getImageMeta(imgUrl);
  const sw = stageEl.clientWidth, sh = stageEl.clientHeight;
  const scale = Math.min(sw/meta.w, sh/meta.h);
  const drawW = meta.w * scale, drawH = meta.h * scale;
  const offX = (sw - drawW)/2, offY = (sh - drawH)/2;

  const rx = rectPct.x * meta.w / 100;
  const ry = rectPct.y * meta.h / 100;
  const rw = rectPct.w * meta.w / 100;
  const rh = rectPct.h * meta.h / 100;

  const left = Math.round(offX + rx * scale);
  const top  = Math.round(offY + ry * scale);
  const width= Math.round(rw * scale);
  const height=Math.round(rh * scale);

  Object.assign(targetEl.style, {
    left:left+'px', top:top+'px', width:width+'px', height:height+'px'
  });
}

/* --------------------------
   2-2) ê³µìœ  ë¬¸êµ¬ ìƒì„±
---------------------------*/
function buildShareData(){
  const key = state.score?.key;
  const label = resultLabelByKey(key);
  const url = 'https://zeroglang.com/';

  const lines = [
    `ë‚˜ëŠ” ${label}!`,
    'ë”± 1ë¶„ë§Œ íˆ¬ìí•˜ë©´ ë‚´ ë¬¸í•´ë ¥ ìºë¦­í„°ê°€ ë½‘íŒë‹¤!',
    'ê²°ê³¼ëŠ” ì¹œêµ¬ë‘ ê³µìœ í•˜ê³  ëˆ„ê°€ ë” ë˜‘ë˜‘í•œì§€ ëŒ€ê²° ê³ ê³ ì”½~',
    '',
    `ğŸ‘‰ í…ŒìŠ¤íŠ¸í•˜ëŸ¬ ê°€ê¸°: ${url}`
  ];
  const text = lines.join('\n');
  return {text};
}

/* --------------------------
   3) ë Œë”ë§
---------------------------*/
let _currentResultImg = null;
let _scoreSpotEl = null;

function render(){
  const scr = screens[state.index];
  if (!scr) return;

  _currentResultImg = scr.img;
  $bg.style.backgroundImage = `url("${scr.img}")`;

  $stage.querySelectorAll('.hotspot, .spot').forEach(el=>el.remove());
  _scoreSpotEl = null;

  // í•«ìŠ¤íŒŸ
  scr.hotspots.forEach(h=>{
    const btn=document.createElement('button');
    btn.className='hotspot';
    btn.setAttribute('aria-label', h.label || h.id);
    const {x,y,w,h:hh}=h.rect;
    Object.assign(btn.style,{ left:x+'%', top:y+'%', width:w+'%', height:hh+'%', borderRadius:'12px' });
    btn.addEventListener('click', ()=>{ if(!LOCK) handle(h.on); });
    $stage.appendChild(btn);
  });

  // ê²°ê³¼ ì ìˆ˜ í‘œì‹œ(ì ˆëŒ€ ê³ ì •)
  if (scr.id === 'result' && state.score?.total != null){
    const posPct = RESULT_SCORE_POS_PCT[state.score.key] || RESULT_SCORE_POS_PCT.comp;
    const spot = document.createElement('div');
    spot.className = 'spot score';
    spot.textContent = `${state.score.total}/${state.score.outOf}`;
    spot.style.borderRadius = '12px';
    $stage.appendChild(spot);
    _scoreSpotEl = spot;

    placeOnContainedBg({ stageEl:$stage, bgEl:$bg, imgUrl:_currentResultImg, rectPct:posPct, targetEl:spot });
  }
}

/* ë¦¬ì‚¬ì´ì¦ˆ ì‹œ ì¬ë°°ì¹˜ */
window.addEventListener('resize', ()=>{
  if (!_scoreSpotEl || state.index !== screens.length-1 || !state.score) return;
  const posPct = RESULT_SCORE_POS_PCT[state.score.key] || RESULT_SCORE_POS_PCT.comp;
  placeOnContainedBg({ stageEl:$stage, bgEl:$bg, imgUrl:_currentResultImg, rectPct:posPct, targetEl:_scoreSpotEl });
});

function next(){
  state.index++;
  if (state.index >= screens.length - 1){
    state.index = screens.length - 1;

    // ì´ì  & ê²°ê³¼í‚¤
    const { totalCorrect } = calcScore(state.answers);
    state.score = { total: totalCorrect, outOf: 8 };

    const resultKey = chooseResult(state.answers);
    const resultImg = resultImageByKey(resultKey);
    screens[state.index].img = resultImg;
    state.score.key = resultKey;
  }
  render();
}

function handle(action){
  if (!action) return;

  if (action === 'next'){ next(); return; }

  if (action.startsWith('answer:')){
    const val = action.split(':')[1];
    const qid = screens[state.index].id;
    state.answers[qid] = val;

    if (Object.prototype.hasOwnProperty.call(correct, qid)){
      const ok = correct[qid] === val;
      LOCK = true;
      showToast(ok ? 'ğŸ‘ ì •ë‹µ' : 'âŒ ì˜¤ë‹µ', ok ? 'ok' : 'bad', 900, ()=>{
        LOCK = false; next();
      });
    } else next();
    return;
  }
  if (action === 'share'){
  const data = buildShareData();
  if (navigator.share){
    navigator.share(data).catch(()=>{});
  } else {
    navigator.clipboard?.writeText(`${data.title}\n\n${data.text}`);
    showToast('ê³µìœ  ë¬¸êµ¬ê°€ ë³µì‚¬ë˜ì—ˆì–´ìš”', 'ok', 1200);
  }
  return;
}
  if (action === 'restart'){
    state.index = 0;
    state.answers = {};
    state.score = null;
    render();
    return;
  }

  if (action === 'instagram'){ window.open('https://www.instagram.com/glang.official', '_blank','noopener'); return; }
  if (action === 'glang'){ openStore(); return; }
}

/* --------------------------
   4) ê²°ê³¼ ì‚°ì¶œ (ìƒ˜í”Œ ê·œì¹™)
---------------------------*/
function chooseResult(answers){
  const isRight = q => answers[q] === correct[q];
  const count = {
    vocab:   (isRight('q1')?1:0) + (isRight('q2')?1:0),
    comp:    (isRight('q3')?1:0) + (isRight('q4')?1:0),
    grammar: (isRight('q5')?1:0) + (isRight('q6')?1:0),
    logic:   (isRight('q7')?1:0)
  };
  const totalCorrect = count.vocab + count.comp + count.grammar + count.logic + (isRight('q8')?1:0);

  if (totalCorrect === 8) return 'expression';

  const maxCnt = Math.max(count.vocab, count.comp, count.grammar, count.logic);
  let winners = Object.entries(count).filter(([,v])=>v===maxCnt).map(([k])=>k);

  if (winners.includes('logic') && isRight('q7')) return 'focus';

  if (winners.length>1 && isRight('q8') && winners.includes('comp')) winners=['comp'];

  const priority=['vocab','comp','grammar','logic'];
  const picked = winners.sort((a,b)=>priority.indexOf(a)-priority.indexOf(b))[0];

  switch(picked){
    case 'vocab':   return 'vocab';
    case 'comp':    return 'comp';
    case 'grammar': return 'grammar';
    case 'logic':   return 'logic';
    default:        return 'comp';
  }
}

function resultImageByKey(key){
  const map = {
    expression:'assets/expression.jpg',
    logic:'assets/logic.jpg',
    focus:'assets/focus.jpg',
    vocab:'assets/vocab.jpg',
    grammar:'assets/grammar.jpg',
    comp:'assets/compreh.jpg'
  };
  return map[key] || map.expression;
}

/* --------------------------
   5) ì‹œì‘
---------------------------*/
render();
</script>
</body>
</html>
