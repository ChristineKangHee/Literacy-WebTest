<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ê¸€ë‘ ë¬¸í•´ë ¥ ìœ í˜• í…ŒìŠ¤íŠ¸</title>
  <!-- ğŸ“Œ ê³µìœ  ìµœì í™” (Open Graph, Twitter, Kakao) -->
  <meta name="description" content="8ë¬¸í•­ìœ¼ë¡œ í™•ì¸í•˜ëŠ” ë‚˜ì˜ ë¬¸í•´ë ¥ ìºë¦­í„°! 1ë¶„ ë§Œì— OX & ê°ê´€ì‹ìœ¼ë¡œ ì§„ë‹¨í•˜ê³  ê¸€ë‘ ì•±ì—ì„œ ì‹¬í™” í•™ìŠµì„ ì´ì–´ê°€ì„¸ìš”." />
  <meta property="og:title" content="ê¸€ë‘ ë¬¸í•´ë ¥ ìœ í˜• í…ŒìŠ¤íŠ¸ â€“ ë‚˜ì˜ ë¬¸í•´ë ¥ ìºë¦­í„° ì°¾ê¸°" />
  <meta property="og:description" content="8ë¬¸í•­ ë¬¸í•´ë ¥ í…ŒìŠ¤íŠ¸ë¡œ ë‚˜ì˜ ì½ê¸° ê°•ì ì„ í™•ì¸í•˜ê³ , 6ê°€ì§€ ë¶€ë°” ìºë¦­í„° ì¤‘ ë‚˜ì™€ ë§ëŠ” ìœ í˜•ì„ ë§Œë‚˜ë³´ì„¸ìš”!" />
  <meta property="og:image" content="https://glang.app/assets/og/literacy-test_1200x630.png" />
  <meta property="og:url" content="https://glang.app/literacy-test" />
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="ko_KR" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="ê¸€ë‘ ë¬¸í•´ë ¥ ìœ í˜• í…ŒìŠ¤íŠ¸ â€“ ë‚˜ì˜ ë¬¸í•´ë ¥ ìºë¦­í„° ì°¾ê¸°" />
  <meta name="twitter:description" content="1ë¶„ ì»· ë¬¸í•´ë ¥ í…ŒìŠ¤íŠ¸ Â· ì–´íœ˜/ë…í•´/ë¬¸ë²•/ë…¼ë¦¬ ì§„ë‹¨ & 6ê°€ì§€ ìºë¦­í„° ê²°ê³¼" />
  <meta name="twitter:image" content="https://glang.app/assets/og/literacy-test_1200x630.png" />
  <!-- ì¹´ì¹´ì˜¤í†¡ ì¸ë„¤ì¼ ìµœì í™” -->
  <meta property="og:site_name" content="ê¸€ë‘(GLANG)" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <style>
    :root{--bg:#faf9ff;--card:#ffffff;--ink:#1f2340;--sub:#6a6f8b;--brand:#6c63ff;--ok:#00b894;--warn:#ffb703;--bad:#ef476f}
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,Pretendard,sans-serif}
    .wrap{max-width:860px;margin:0 auto;padding:20px}
    header{display:flex;align-items:center;gap:10px;margin:10px 0 18px}
    header .logo{width:36px;height:36px;border-radius:10px;background:var(--brand);display:grid;place-items:center;color:#fff;font-weight:800}
    h1{font-size:22px;margin:0}
    .card{background:var(--card);border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.06);padding:20px}
    .intro h2{margin-top:0}
    .meta{color:var(--sub);font-size:14px}
    .btn{appearance:none;border:0;border-radius:12px;padding:14px 16px;background:var(--brand);color:#fff;font-weight:700;cursor:pointer}
    .btn.secondary{background:#e9e8ff;color:#3f3aeb}
    .btn.ghost{background:transparent;border:2px solid var(--brand);color:var(--brand)}
    .btn:disabled{opacity:.5;cursor:not-allowed}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .space{height:12px}
    .progress{height:10px;background:#ececff;border-radius:999px;overflow:hidden}
    .bar{height:100%;width:0;background:linear-gradient(90deg,#6c63ff,#9a93ff)}
    .q-title{font-size:18px;font-weight:700}
    .choices{display:grid;gap:10px;margin-top:14px}
    .choice{display:flex;align-items:flex-start;gap:10px;border:2px solid #ececff;border-radius:12px;padding:12px;cursor:pointer;transition:all .15s}
    .choice:hover{border-color:#d7d6ff;background:#fbfbff}
    .choice input{margin-top:4px}
    .pill{display:inline-block;border-radius:999px;padding:4px 10px;background:#eef0ff;color:#3f3aeb;font-size:12px;font-weight:700;margin-left:6px}
    .result{display:grid;gap:14px}
    .result .hero{display:flex;gap:16px;align-items:center}
    .char{width:88px;height:88px;border-radius:18px;background:#fff;display:grid;place-items:center;border:2px dashed #e6e6ff}
    .kpi{display:grid;gap:8px}
    .kpi-row{display:grid;grid-template-columns:120px 1fr;gap:10px;align-items:center}
    .kpi .progress{height:8px}
    footer{margin:28px 0 10px;color:var(--sub);font-size:12px;text-align:center}
    .note{font-size:12px;color:var(--sub)}
    .char{width:88px;height:88px;border-radius:18px;background:#fff;display:grid;place-items:center;border:2px dashed #e6e6ff;overflow:hidden}
    .char img{width:100%;height:100%;object-fit:cover;border-radius:16px}
/* Intro ìºë¦­í„° ë¡œí…Œì´í„° */
.rotator{
  width: 160px;           /* í•„ìš”ì‹œ 120~200pxë¡œ ì¡°ì ˆ */
  height: 160px;
  margin-top: 10px;
  border-radius: 18px;
  overflow:hidden;
  border:2px dashed #e6e6ff;
  background:#fff;
  display:grid;
  place-items:center;
}
.rotator img{
  width:100%;
  height:100%;
  object-fit:cover;
  animation: fadeIn .35s ease;
  border-radius:16px;
}
@keyframes fadeIn{
  from{opacity:0; transform:scale(.98)}
  to{opacity:1; transform:scale(1)}
}

  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">G</div>
      <div>
        <h1>ë¬¸í•´ë ¥ ìœ í˜• í…ŒìŠ¤íŠ¸</h1>
        <div class="meta">8ë¬¸í•­ Â· OX & 4ì§€ì„ ë‹¤ Â· 1ë¶„ì»·</div>
      </div>
    </header>

    <main class="card" id="app">
      <!-- Content renders here -->
    </main>
    <footer>Â© GLANG Â· Literacy mini test for promo</footer>
  </div>

<script>
// ====== ë°ì´í„° ì •ì˜ ======
const QUESTIONS = [
    // QUESTIONS[0] êµì²´
  {
    id: 1,
    area: 'ì–´íœ˜',
    type: 'OX',
    text: "â€˜ì‚¬í˜ ë’¤â€™ëŠ” ì˜¤ëŠ˜ì´ 1ì¼ì´ë¼ë©´ 5ì¼ì´ë‹¤.", // ì˜ë„ì ìœ¼ë¡œ í‹€ë¦° ì§„ìˆ 
    options: ['O','X'],
    answer: 1, // X
    weights: { VOCAB: 1, FOCUS: 0.2 }
  },
  {
    id: 2,
    area: 'ì–´íœ˜',
    type: '4ì§€ì„ ë‹¤',
    text: "â€˜ê¸ˆì¼â€™ì˜ ì˜ë¯¸ë¡œ ì•Œë§ì€ ê²ƒì€?",
    options: ['ì˜¤ëŠ˜','ë‚´ì¼','ì´ë²ˆ ì£¼','ìš”ì¦˜'],
    answer: 0,
    weights: { VOCAB: 1 }
  },
  {
    id: 3,
    area: 'ë…í•´',
    type: '4ì§€ì„ ë‹¤',
    text: "ì•„ë˜ ê¸€ì„ ì½ê³  í•µì‹¬ì„ ê³ ë¥´ì„¸ìš”.\nâ€˜ì–´ë–¤ ì‚¬ëŒì€ ì§§ì€ ê¸€ì€ ì˜ ì´í•´í•˜ì§€ë§Œ ê¸´ ê¸€ì—ì„œëŠ” í•µì‹¬ì„ ë†“ì¹œë‹¤. ì´ëŸ° ê²½ìš° ê¾¸ì¤€íˆ ìš”ì•½ í›ˆë ¨ì„ í•˜ëŠ” ê²ƒì´ ë„ì›€ì´ ëœë‹¤.â€™",
    options: ['ê¸´ ê¸€ì€ ì½ì§€ ë§ì','ìš”ì•½ í›ˆë ¨ì´ í•„ìš”í•˜ë‹¤','ëª¨ë“  ê¸€ì„ ë˜‘ê°™ì´ ì½ì–´ì•¼ í•œë‹¤','ì§§ì€ ê¸€ì€ ì‰¬ìš´ ê¸€ì´ë‹¤'],
    answer: 1,
    weights: { COMPREH: 1, LOGIC: 0.3 }
  },
  {
    id: 4,
    area: 'ë…í•´',
    type: 'OX',
    text: "â€˜ë°°ê°€ ê³ íŒŒì„œ ë°¥ì„ ë¨¹ì—ˆë‹¤â€™ì—ì„œ ì›ì¸ì€ â€˜ë°°ê°€ ê³ íŒŒì„œâ€™ì´ê³  ê²°ê³¼ëŠ” â€˜ë°¥ì„ ë¨¹ì—ˆë‹¤â€™ì´ë‹¤.",
    options: ['O','X'],
    answer: 0,
    weights: { COMPREH: 1 }
  },
  {
    id: 5,
    area: 'ë¬¸ë²•',
    type: '4ì§€ì„ ë‹¤',
    text: "ë‹¤ìŒ ì¤‘ ë§ëŠ” í‘œê¸°ëŠ”?",
    options: ['í•  ìˆ˜ ìˆë‹¤','í• ìˆ˜ìˆë‹¤','í• ìˆ˜ ìˆë‹¤','í•  ìˆ˜ìˆë‹¤'],
    answer: 0,
    weights: { GRAMMAR: 1, EXPRESSION: 0.3 }
  },
  {
    id: 6,
    area: 'ë¬¸ë²•',
    type: 'OX',
    text: "â€˜ë¨¹ì„ê²Œâ€™ê°€ ë§ëŠ” í‘œí˜„ì´ë‹¤.",
    options: ['O','X'],
    answer: 0, // O
    weights: { GRAMMAR: 1 }
  },
  {
    id: 7,
    area: 'ë…¼ë¦¬',
    type: '4ì§€ì„ ë‹¤',
    text: "â€˜ëª¨ë“  ìƒˆëŠ” ë‚  ìˆ˜ ìˆë‹¤. í­ê·„ì€ ìƒˆë‹¤. ë”°ë¼ì„œ í­ê·„ì€ ë‚  ìˆ˜ ìˆë‹¤.â€™ì˜ ë¬¸ì œì ì€?",
    options: ['ì‚¬ì‹¤ê³¼ ì˜ê²¬ì´ ì„ì˜€ë‹¤','ì „ì œê°€ ì˜ëª»ëë‹¤','ë…¼ë¦¬ì ìœ¼ë¡œ ì™„ë²½í•˜ë‹¤','ê²°ë¡ ì´ ì ì ˆí•˜ë‹¤'],
    answer: 1,
    weights: { LOGIC: 1 }
  },
  {
    id: 8,
    area: 'ì¢…í•©',
    type: '4ì§€ì„ ë‹¤',
    text: "ë‹¤ìŒ ì¤‘ ë¬¸í•´ë ¥ì˜ ì •ì˜ë¡œ ê°€ì¥ ì ì ˆí•œ ê²ƒì€?",
    options: ['ê¸€ì„ ì½ê³  ì“¸ ìˆ˜ ìˆëŠ” ëŠ¥ë ¥','ì½ê³  ì´í•´Â·ë¹„íŒÂ·í‘œí˜„í•˜ëŠ” ì¢…í•© ëŠ¥ë ¥','ê¸€ìë¥¼ ë§ì´ ì•„ëŠ” ëŠ¥ë ¥','ê¸´ ê¸€ì„ ëê¹Œì§€ ì½ëŠ” ëˆê¸°'],
    answer: 1,
    weights: { LOGIC: 0.7, COMPREH: 0.3 }
  }
];

// ê²°ê³¼ ìœ í˜• ì •ì˜ (6ìœ í˜•) â€” descë¥¼ [ê¸€ í˜•ì‹] í†¤ìœ¼ë¡œ ê°œí¸
const TYPES = {
  VOCAB: { 
    name: 'ì–´íœ˜ ë§ˆìŠ¤í„°', 
    color: '#ffcf33', 
    desc: 'ë‚¯ì„  ë‹¨ì–´ë¥¼ ë³´ë©´ í˜¸ê¸°ì‹¬ì´ ë¨¼ì € ì˜¬ë¼ì˜¤ëŠ” ë‹¹ì‹ !<br>ëœ»ê³¼ ë‰˜ì•™ìŠ¤ë¥¼ ì“± ìºì¹˜í•˜ê³ , ë¹„ìŠ·í•œ í‘œí˜„ë„ ê¹”ë”íˆ êµ¬ë¶„í•´ìš”.<br>ì¹œêµ¬ë“¤ì´ í—·ê°ˆë¦¬ëŠ” ë§ëœ» ë¬¼ì–´ë³¼ ë•Œ í•´ê²°ì‚¬ë¡œ í™œì•½í•˜ì£ !<br>ê°€ë” ë””í…Œì¼ì— ëª°ì…í•´ í° íë¦„ì„ ë†“ì¹  ìˆ˜ ìˆì§€ë§Œ, í•œ ë²ˆ ì •ë¦¬í•˜ë©´ ì˜¤ë˜ ê°€ìš”.<br>ë‹¨ì–´ì¥Â·í•˜ì´ë¼ì´íŠ¸Â·ì§¤ë§‰ ë©”ëª¨ê°€ ë”± ë§ëŠ” ë£¨í‹´ì´ì—ìš”.<br>ì˜¤ëŠ˜ì˜ ì‹ ì¡°ì–´ë„ ê¸ˆë°© ë‚´ ê²ƒìœ¼ë¡œ ë§Œë“œëŠ” ì–´íœ˜ ê³ ìˆ˜!', 
    img: 'assets/character1.jpg'
  },
  COMPREH: { 
    name: 'ë…í•´ íƒìƒ‰ì', 
    color: '#6dd3ff', 
    desc: 'ê¸€ì˜ êµ¬ì¡°ì™€ ìš”ì§€ë¥¼ ë²ˆì© í¬ì°©í•˜ëŠ” ë‹¹ì‹ !<br>â€œê·¸ë˜ì„œ í•µì‹¬ì€?â€ í•œ ì¤„ ìš”ì•½ì— ê°•í•´ìš”.<br>ë¬¸ë‹¨ ê°„ ì—°ê²°ê³¼ ì›ì¸â€“ê²°ê³¼ë¥¼ ê¹”ë”íˆ ì¡ì•„ë‚´ì£ .<br>ë•Œë¡œëŠ” ì„¸ë¶€ë³´ë‹¤ í° ê·¸ë¦¼ì„ ë¨¼ì € ë³´ëŠ” í¸ì´ë¼, ê·¼ê±°ë§Œ ì‚´ì§ ë³´ê°•í•˜ë©´ ê¸ˆìƒì²¨í™”!<br>ë§ˆì¸ë“œë§µÂ·í‚¤ì›Œë“œ ì¹´ë“œÂ·ë¬¸ë‹¨í‘œì‹œê°€ ì°°ë–¡ ë³´ì¡° ì¥ë¹„ì˜ˆìš”.<br>ê¸´ ê¸€ë„ ë°©í–¥ ìƒì§€ ì•ŠëŠ” ë“ ë“ í•œ í•­í•´ì‚¬!', 
    img: 'assets/character2.jpg'
  },
  GRAMMAR: { 
    name: 'ë¬¸ë²• ê°€ë””ì–¸', 
    color: '#b8e986', 
    desc: 'ë§ì¶¤ë²• ë ˆì´ë”ê°€ ìë™ ì‘ë™ë˜ëŠ” ì •í™•ì„± í”Œë ˆì´ì–´!<br>ì–´ìƒ‰í•œ ë„ì–´ì“°ê¸°ë‚˜ ë¬¸ì¥ ë³´ë©´ ë°”ë¡œ ë‹¤ë“¬ê³  ì‹¶ì–´ì ¸ìš”.<br>ê·œë²”ì„ ì§€ì¼œ ë¬¸ì„œ í€„ë¦¬í‹°ë¥¼ í•œ ë‹¨ê³„ ëŒì–´ì˜¬ë¦¬ëŠ” íƒ€ì…ì´ì£ .<br>ê°€ë” ì°½ì˜ì  í‘œí˜„ ì•ì—ì„œ ë©ˆì¹«í•  ìˆ˜ ìˆì§€ë§Œ, ê¸°ì¤€ ìœ„ì— ë³€ì£¼ë¥¼ ì–¹ìœ¼ë©´ ìµœê³ !<br>êµì •Â·ì²´í¬ë¦¬ìŠ¤íŠ¸Â·ì˜ˆë¬¸ ìˆ˜ì§‘ì´ ì„±í–¥ê³¼ ì°°ë–¡ê¶í•©.<br>íŒ€ì˜ ê¸€ì„ ë“ ë“ íˆ ì§€í‚¤ëŠ” ë¬¸ë²• ìˆ˜í˜¸ì!', 
    img: 'assets/character3.jpg'
  },
  LOGIC: { 
    name: 'ë…¼ë¦¬ í¬ë¦¬í‹°ì»¤', 
    color: '#a78bfa', 
    desc: 'ì£¼ì¥ì—” ê·¼ê±°, ì˜ˆì™¸ì—” ë°˜ë¡€! í—ˆì ì„ ë‚ ì¹´ë¡­ê²Œ í¬ì°©í•˜ëŠ” ë¹„íŒì  ë…ìì˜ˆìš”.<br>ì£¼ì¥â€“ê·¼ê±°â€“ê²°ë¡  êµ¬ì¡°ë¡œ ì„¤ë“ì˜ íë¦„ì„ ê²¬ê³ í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤.<br>ë°ì´í„° ê²€ì¦ì„ ì¦ê¸°ê³ , ê°ì •ì  ìˆ˜ì‚¬ëŠ” ìµœì†Œí™”í•˜ëŠ” ì¿¨í•œ íƒ€ì…!<br>ê°€ë” ëƒ‰ì •í•´ ë³´ì¼ ìˆ˜ ìˆìœ¼ë‹ˆ ë”°ëœ»í•œ ì˜ˆì‹œë¥¼ ê³ë“¤ì´ë©´ ì™„ë²½í•´ìš”.<br>í† ë¡ Â·íŒ©íŠ¸ì²´í¬Â·ê·¼ê±°í‘œ ë§Œë“¤ê¸°ì— ì§„ê°€ë¥¼ ë°œíœ˜í•´ìš”.<br>ì½ê¸°ë¥¼ ìƒê°ìœ¼ë¡œ, ìƒê°ì„ ë…¼ë¦¬ë¡œ ë°”ê¾¸ëŠ” ì„¤ê³„ì!', 
    img: 'assets/character4.jpg'
  },
  EXPRESSION: { 
    name: 'í‘œí˜„ í¬ë¦¬ì—ì´í„°', 
    color: '#ff9ecd', 
    desc: 'ì•„ì´ë””ì–´ë¥¼ ë§¤ë ¥ì ìœ¼ë¡œ í¬ì¥í•˜ëŠ” ìŠ¤í† ë¦¬í…”ëŸ¬!<br>ì–´íœ˜ ì„ íƒê³¼ ë¬¸ì¥ ë¦¬ë“¬ì´ ì‚´ì•„ ìˆì–´ ì½ëŠ” ì¬ë¯¸ë¥¼ ëŒì–´ì˜¬ë ¤ìš”.<br>ë¹„ìœ ì™€ ì‚¬ë¡€ë¡œ ê³µê°ì„ ì´ëŒê³ , êµ¬ì„±ìœ¼ë¡œ íë¦„ì„ ì¡ëŠ” ëŠ¥ë ¥ìì£ .<br>ë•Œë¡œëŠ” ë””í…Œì¼ ê·¼ê±°ê°€ ì•„ì‰¬ìš¸ ìˆ˜ ìˆì–´ìš”â€”íŒ©íŠ¸ ì²´í¬ë§Œ ë”í•˜ë©´ ê¸ˆìƒì²¨í™”!<br>ì—ì„¸ì´Â·ë°œí‘œÂ·ì¹´í”¼ë¼ì´íŒ… ë¯¸ì…˜ì—ì„œ ë¹›ë‚˜ìš”.<br>ë‹¹ì‹ ì˜ ë¬¸ì¥ì€ ê³¨ë¼ ì½ëŠ” ê¸€ì„ â€˜ì½ê³  ì‹¶ì–´ì§€ëŠ” ê¸€â€™ë¡œ ë°”ê¿‰ë‹ˆë‹¤!', 
    img: 'assets/character5.jpg'
  },
  FOCUS: { 
    name: 'ì§‘ì¤‘ íŒŒì´í„°', 
    color: '#ffad5a', 
    desc: 'í•œ ë²ˆ ëª°ì…í•˜ë©´ ëê¹Œì§€! ê¸´ ê¸€ë„ í˜ì´ìŠ¤ë¥¼ ìœ ì§€í•˜ë©° ì™„ë…í•˜ëŠ” ëˆê¸°ì™•!<br>ë°©í•´ ìš”ì†Œë¥¼ ì°¨ë‹¨í•˜ê³  ë£¨í‹´ì„ ë§Œë“œëŠ” ë° íƒì›”í•´ìš”.<br>íƒ€ì´ë¨¸Â·ì²´í¬ë¦¬ìŠ¤íŠ¸Â·ì‘ì€ ëª©í‘œë¡œ ê¾¸ì¤€íˆ ì „ì§„í•˜ì£ .<br>ê°€ë” ì†ë„ì— ì§‘ì¤‘í•´ í•µì‹¬ í‘œì‹œë¥¼ ë†“ì¹  ìˆ˜ ìˆìœ¼ë‹ˆ ìš”ì•½Â·í‚¤ì›Œë“œ í‘œì‹œë¥¼ ê³ë“¤ì´ë©´ íš¨ìœ¨ UP!<br>ì±Œë¦°ì§€Â·ì—°ì† ì½”ìŠ¤ ë¯¸ì…˜ì—ì„œ ì§„ê°€ í­ë°œ!<br>ì˜¤ëŠ˜ë„ í•œ í˜ì´ì§€, ë‚´ì¼ì€ í•œ ì±•í„°â€”ê¾¸ì¤€í•¨ì´ ì‹¤ë ¥ì„ ë§Œë“­ë‹ˆë‹¤.', 
    img: 'assets/character6.jpg'
  }
};


// ====== ìƒíƒœ ======
let state = { step: 'intro', index: 0, answers: Array(QUESTIONS.length).fill(null) };

const $app = document.getElementById('app');

function render(){
  if(state.step==='intro') return renderIntro();
  if(state.step==='quiz') return renderQuiz();
  if(state.step==='result') return renderResult();
}

function renderIntro(){
  $app.innerHTML = `
    <section class="intro">
      <h2>ë‚˜ì˜ ë¬¸í•´ë ¥ ìœ í˜•ì€?</h2>
      <div class="rotator"><img id="rotImg" alt="ìºë¦­í„° ë¯¸ë¦¬ë³´ê¸°" /></div>
      <p class="meta">OXì™€ 4ì§€ì„ ë‹¤ë¡œ ì–´íœ˜Â·ë…í•´Â·ë¬¸ë²•Â·ë…¼ë¦¬ë¥¼ ê°€ë³ê²Œ ì ê²€í•©ë‹ˆë‹¤.</p>
      <div class="space"></div>
      <button class="btn" onclick="startQuiz()">ì‹œì‘í•˜ê¸°</button>
      <div class="space"></div>
      <p class="note">ê²°ê³¼ëŠ” 6ê°€ì§€ ìºë¦­í„°(ì–´íœ˜/ë…í•´/ë¬¸ë²•/ë…¼ë¦¬/í‘œí˜„/ì§‘ì¤‘) ì¤‘ í•˜ë‚˜ë¡œ ì œê³µë©ë‹ˆë‹¤.</p>
    </section>
  `;
  startRotator(); // â˜… ì¶”ê°€: ë¡œí…Œì´í„° ì‹œì‘
}
// ====== Intro ìºë¦­í„° ë¡œí…Œì´í„° ======
let introTimer = null;
const INTRO_IMAGES = [
  'assets/character1.jpeg',
  'assets/character2.jpeg',
  'assets/character3.jpeg',
  'assets/character4.jpeg',
  'assets/character5.jpeg',
  'assets/character6.jpeg'
];

// ì´ë¯¸ì§€ í”„ë¦¬ë¡œë“œ + jpg í´ë°± ì§€ì›
function preloadIntroImages() {
  INTRO_IMAGES.forEach((src, i) => {
    const img = new Image();
    img.onerror = () => {
      // jpegê°€ ì—†ìœ¼ë©´ jpg ì‹œë„
      const jpg = src.replace('.jpeg', '.jpg');
      INTRO_IMAGES[i] = jpg;
      const fix = new Image();
      fix.src = jpg;
    };
    img.src = src;
  });
}

function startRotator(){
  preloadIntroImages();
  const el = document.getElementById('rotImg');
  if(!el) return;

  let idx = 0;
  const setImage = () => {
    el.src = INTRO_IMAGES[idx];
    el.onerror = function(){
      // ë‚¨ì•„ìˆëŠ” í™•ì¥ì ì´ìŠˆ ëŒ€ë¹„: jpegâ†”jpg ì–‘ë°©í–¥ í´ë°±
      const nextTry = el.src.endsWith('.jpeg') ? el.src.replace('.jpeg','.jpg') : el.src.replace('.jpg','.jpeg');
      if(nextTry !== el.src){ el.src = nextTry; }
    };
    idx = (idx + 1) % INTRO_IMAGES.length;
  };
  setImage();
  clearInterval(introTimer);
  introTimer = setInterval(setImage, 900); // ì „í™˜ ê°„ê²©(ms) ì¡°ì ˆ ê°€ëŠ¥
}

// í€´ì¦ˆë¡œ ë„˜ì–´ê°ˆ ë•Œ íƒ€ì´ë¨¸ ì •ë¦¬
function startQuiz(){
  if(introTimer){ clearInterval(introTimer); introTimer = null; }
  state.step='quiz';
  state.index=0; state.answers=Array(QUESTIONS.length).fill(null);
  render();
}


function startQuiz(){
  state.step='quiz';
  state.index=0; state.answers=Array(QUESTIONS.length).fill(null);
  render();
}

function renderQuiz(){
  const q = QUESTIONS[state.index];
  const total = QUESTIONS.length;
  const progress = ((state.index)/total)*100;
  const selected = state.answers[state.index];
  $app.innerHTML = `
    <div class="meta">ë¬¸í•­ ${state.index+1} / ${total} Â· ${q.area} Â· ${q.type}</div>
    <div class="progress" aria-label="ì§„í–‰ë¥ "><div class="bar" style="width:${progress}%"></div></div>
    <div class="space"></div>
    <div class="q-title">${escapeHTML(q.text).replace(/\n/g,'<br>')}</div>
    <div class="choices" role="group" aria-label="ì„ íƒì§€">
      ${q.options.map((opt,i)=>`
        <label class="choice">
          <input type="radio" name="q${q.id}" ${selected===i?'checked':''} onchange="choose(${i})" />
          <div><div>${escapeHTML(opt)}</div></div>
        </label>
      `).join('')}
    </div>
    <div class="space"></div>
    <div class="row">
      <button class="btn secondary" ${state.index===0?'disabled':''} onclick="prev()">ì´ì „</button>
      <button class="btn" ${selected==null?'disabled':''} onclick="next()">${state.index===total-1?'ê²°ê³¼ë³´ê¸°':'ë‹¤ìŒ'}</button>
    </div>
  `;
}

function choose(i){
  state.answers[state.index]=i; render();
}
function prev(){ state.index=Math.max(0,state.index-1); render(); }
function next(){
  if(state.index===QUESTIONS.length-1){
    state.step='result';
    render();
  } else { state.index++; render(); }
}

function scoreDetail(){
  // ì˜ì—­ë³„ ê°€ì¤‘ì¹˜ í•©ì‚° (ì •ë‹µë§Œ ë°˜ì˜)
  const buckets = { VOCAB:0, COMPREH:0, GRAMMAR:0, LOGIC:0, EXPRESSION:0, FOCUS:0 };
  const correctFlags = [];
  QUESTIONS.forEach((q,idx)=>{
    const ok = state.answers[idx]===q.answer;
    correctFlags[idx]=ok;
    if(ok){
      for(const k in q.weights){ buckets[k]+=q.weights[k]; }
    }
  });
  const totalScore = correctFlags.filter(Boolean).length;
  return { buckets, totalScore, correctFlags };
}

function pickType(detail){
  // ìµœëŒ“ê°’ ìœ í˜• ì„ íƒ, ë™ì  ì‹œ ìš°ì„ ìˆœìœ„: COMPREH > VOCAB > GRAMMAR > LOGIC > EXPRESSION > FOCUS
  const order = ['COMPREH','VOCAB','GRAMMAR','LOGIC','EXPRESSION','FOCUS'];
  let winner = 'FOCUS', best = -1;
  for(const k of order){
    const v = detail.buckets[k];
    if(v>best){ best=v; winner=k; }
  }
  // ë§¤ìš° ë†’ì€ ì´ì ì´ë©´ ë…¼ë¦¬ ë¶€ë°” ë³´ì •
  if(detail.totalScore>=7){ winner='LOGIC'; }
  return winner;
}

function renderResult(){
  const detail = scoreDetail();
  const winnerKey = pickType(detail);
  const t = TYPES[winnerKey];

  // ì˜ì—­ë³„ ì§„í–‰ë°” ë°ì´í„°
  const pretty = [
    ['ì–´íœ˜', detail.buckets.VOCAB],
    ['ë…í•´', detail.buckets.COMPREH],
    ['ë¬¸ë²•', detail.buckets.GRAMMAR],
    ['ë…¼ë¦¬', detail.buckets.LOGIC],
    ['í‘œí˜„', detail.buckets.EXPRESSION],
    ['ì§‘ì¤‘', detail.buckets.FOCUS],
  ];
  const maxBar = Math.max(...pretty.map(p=>p[1]), 1);

  $app.innerHTML = `
    <section class="result">
      <div class="hero">
        <div class="char" style="border-color:${t.color}">
          <img src="${t.img}" alt="${t.name}" onerror="this.replaceWith(document.createTextNode('ğŸ§©'));">
        </div>
        <div>
          <div class="pill" style="background:${t.color}22;color:${t.color}">ë‹¹ì‹ ì˜ ìºë¦­í„°</div>
          <h2 style="margin:.2rem 0 0">${t.name}</h2>
          <p class="meta" style="margin:.35rem 0 0">ì´ì  ${detail.totalScore} / ${QUESTIONS.length}</p>
        </div>
      </div>

      <p style="margin:8px 0 0">${t.desc}</p>

      <div class="space"></div>
      <h3 style="margin:0">ì˜ì—­ë³„ í”„ë¡œíŒŒì¼</h3>
      <div class="kpi">
        ${pretty.map(([label,val])=>{
          const pct = Math.round((val/maxBar)*100);
          return `<div class=\"kpi-row\"><div class=\"meta\">${label}</div><div class=\"progress\"><div class=\"bar\" style=\"width:${pct}%;background:${t.color}\"></div></div></div>`
        }).join('')}
      </div>

      <div class="space"></div>
      <div class="row">
        <button class="btn" onclick="shareResult('${t.name}', ${detail.totalScore})">ê²°ê³¼ ê³µìœ í•˜ê¸°</button>
        <button class="btn ghost" onclick="startQuiz()">ë‹¤ì‹œ í’€ê¸°</button>
      </div>

      <div class="space"></div>
      <a class="btn secondary" href="#" onclick="goToStore();return false;">
        ğŸ‘‰ ê¸€ë‘ ì•±ì—ì„œ ì‹¬í™” í…ŒìŠ¤íŠ¸
      </a>


      <div class="space"></div>
      <details>
        <summary>ì •ë‹µ í•´ì„¤ ë³´ê¸°</summary>
        <ol>
          ${QUESTIONS.map((q,i)=>`<li><strong>Q${i+1}</strong> ì •ë‹µ: ${q.options[q.answer]}</li>`).join('')}
        </ol>
      </details>
    </section>
  `;
}

function shareResult(name, score){
  const text = `ë‚˜ëŠ” ${name}! (ì´ì  ${score}/${QUESTIONS.length}) â€” ê¸€ë‘ ë¬¸í•´ë ¥ ë¯¸ë‹ˆ í…ŒìŠ¤íŠ¸`;
  const url = location.href;
  if(navigator.share){ navigator.share({title: 'ê¸€ë‘ ë¬¸í•´ë ¥ í…ŒìŠ¤íŠ¸', text, url}).catch(()=>{}); }
  else { navigator.clipboard.writeText(`${text} ${url}`).then(()=>alert('ê²°ê³¼ ë§í¬ë¥¼ í´ë¦½ë³´ë“œì— ë³µì‚¬í–ˆì–´ìš”!')); }
}
function goToStore(){
  const ua = navigator.userAgent || navigator.vendor || window.opera;
  
  if (/android/i.test(ua)) {
    // ì•ˆë“œë¡œì´ë“œ â†’ í”Œë ˆì´ìŠ¤í† ì–´
    window.location.href = "https://play.google.com/store/apps/details?id=com.zero.glang&pcampaignid=web_share";
  } else if (/iPad|iPhone|iPod/.test(ua) && !window.MSStream) {
    // iOS â†’ ì•±ìŠ¤í† ì–´
    window.location.href = "https://apps.apple.com/kr/app/%EA%B8%80%EB%9E%91-glang/id6740841063";
  } else {
    // PC ë° ê¸°íƒ€ í™˜ê²½ â†’ Google Play ì›¹ ë§í¬
    window.location.href = "https://play.google.com/store/apps/details?id=com.zero.glang&pcampaignid=web_share";
  }
}

function escapeHTML(s){ return s.replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[c])); }

render();
</script>
</body>
</html>
